language: node_js

node_js:
  node

branches:
  only:
    - master
    - dev

stages:
  - build
  - test

jobs:
  include:
    - stage: build
      script: npm run build

    - stage: test
      env: JOB="Mocha unit tests"
      script: 
        - npm run test-1
        - npm run test-2
        

    - stage: test
      env: JOB="mocha unit tests"
      script: npm run lint

    - stage: test
      env: JOB="tslint"
      if: NOT type = pull_request
      script:
      - npm run test-3
        
